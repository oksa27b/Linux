Урок 3. Права доступа и безопасность
Задание:
Создать два произвольных файла. Первому присвоить права на чтение и запись для владельца и группы, только на чтение — для всех. Второму присвоить права на чтение и запись только для владельца. Сделать это в численном и символьном виде.
Назначить новых владельца и группу для директории целиком.
Управление пользователями:
* создать пользователя, используя утилиту useradd и adduser;
* удалить пользователя, используя утилиту userdel.
Управление группами:
* создать группу с использованием утилит groupadd и addgroup;
* попрактиковаться в смене групп у пользователей;
* добавить пользователя в группу, не меняя основной;
Создать пользователя с правами суперпользователя. Сделать так, чтобы sudo не требовал пароль для выполнения команд.
-------------------------------------------------------------------------------------------------------
Дополнительные (необязательные) задания:
* Используя дополнительные материалы, выдать одному из созданных пользователей право на выполнение ряда команд, требующих прав суперпользователя (команды выбираем на своё усмотрение).
* Создать группу developer и нескольких пользователей, входящих в неё. Создать директорию для совместной работы. Сделать так, чтобы созданные одними пользователями файлы могли изменять другие пользователи этой группы.
* Создать в директории для совместной работы поддиректорию для обмена файлами, но чтобы удалять файлы могли только их создатели.
* Создать директорию, в которой есть несколько файлов. Сделать так, чтобы открыть файлы можно было, только зная имя файла, а через ls список файлов посмотреть было нельзя.
Результат:
Текст команд, которые применялись при выполнении задания. Присылаем в формате текстового документа: задание и команды для решения (без вывода). Формат - PDF (один файл на все задания).

После загрузки задания, вы можете проверить себя самостоятельно с помощью эталонного решения

Создать два произвольных файла. Первому присвоить права на чтение и запись для владельца и группы, только на чтение — для всех. Второму присвоить права на чтение и запись только для владельца. Сделать это в численном и символьном виде.
Назначить новых владельца и группу для директории целиком.

  207  touch file{1..2}
  208  ll
  209  chmod 664 file1
  210  chmod 600 file2
  211  ll
  212  chmod u-rwx,g-rwx,o-rwx file1 file2
  213  chmod u+rw,g+rw,o+r file1
  214  chmod u+rw file2
  215  sudo useradd -ou 0 -g 0 new_admin

Управление пользователями:
* создать пользователя, используя утилиту useradd и adduser;
  219  sudo useradd -g 100 -G 999 -m -s /bin/bash testuser1
  220  ll
  221  id testuser1
  222  ll /home/
  223  cat /etc/passwd
  219  sudo useradd -g 100 -G 999 -m -s /bin/bash testuser1
  220  ll
  221  id testuser1
  222  ll /home/
  223  cat /etc/passwd
  224  history
  225  ll
  226  id
  227  id testuser1
  228  ll
  229  sudo adduser testuser3
  230  ll /home/

* удалить пользователя, используя утилиту userdel.
  232  userdel -rf testuser1
  233  sudo su
  234  sudo userdel -rf testuser1
  235  cd home
  236  cd /home/
  237  ll
  238  sudo userdel -rf testuser3
  239  cd ..
  240  sudo userdel -rf testuser3
  241  ll
  242  cd /home
  243  ll
  244  cd ..
  245  ll /home
  246  ll /bin/bash
  247  sudo su
   33  ll /bin/bash
   34  sudo userdel -rf testuser1
   35  ll
   36  history
root@oksana-VirtualBox:/#
   
Управление группами:
* создать группу с использованием утилит groupadd и addgroup;
  256  sudo groupadd group1
  257  sudo addgroup group2
  258  ll
  259  cd /home/
  260  ll
  261  cd ..
  262  grep group /etc/group

* попрактиковаться в смене групп у пользователей;
  268  sudo useradd -g group1 -G sudo -m -s /bin testuser1
  269  sudo useradd -g group1 -G sudo -m -s /bin testuser4
  270  ll
  271  cd /home
  272  sudo useradd -g group1 -G sudo -m -s /bin testuser4
  273  cd ..
  274  id testuser1
  275  id testuser4
  276  sudo usermod -G users testuser1
  277  id testuser1
  278  sudo usermod -g users testuser1
  279  id testuser1	

* добавить пользователя в группу, не меняя основной;
  281  sudo usermod -aG group1,group2,sudo,docker testuser1
  282  sudo usermod -aG group1,group2,sudo testuser1
  283  id testuser1

Создать пользователя с правами суперпользователя. Сделать так, чтобы sudo не требовал пароль для выполнения команд.
  293  sudo useradd -G sudo -m -s /bin testuser5
  294  ll /home
  295  id testuser5
  296  grep sudo /etc/group
  297  sudo passwd testuser5
  298  sudo sudoedit /etc/sudoers

